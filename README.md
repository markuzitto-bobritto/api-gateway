# üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ Twitter-–∫–ª–æ–Ω–∞

## üìå –û–±—â–∞—è –∏–¥–µ—è

–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∫–ª–æ–Ω–∞ Twitter —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É backend-–∞:

* –í—ã—Å–æ–∫–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
* –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
* –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–æ–≤ –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ WebSocket
* –†–∞–±–æ—Ç–∞ —Å Kafka, gRPC, Redis, PostgreSQL –∏ –¥—Ä.

## üîß –û–±—â–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                                |
| --------------- | ----------------------------------------- |
| –Ø–∑—ã–∫            | Go                                        |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | Docker + Docker Compose                   |
| API             | REST + gRPC                               |
| –°–æ–æ–±—â–µ–Ω–∏—è       | Kafka, Redis Streams                      |
| –°–£–ë–î            | PostgreSQL, Redis, ClickHouse (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞) |
| –ö—ç—à             | Redis                                     |
| CI/CD           | GitHub Actions                            |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥      | Prometheus, Grafana                       |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ     | Loki + Grafana, zap/logrus                |
| –†–µ–∞–ª—Ç–∞–π–º        | WebSocket-—à–ª—é–∑                            |
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞  | 1‚Äì2 VPS (Ubuntu), TLS —á–µ—Ä–µ–∑ Let's Encrypt |

---

# üì¶ –°–µ—Ä–≤–∏—Å—ã

## 1. Gateway API

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

* REST-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ gRPC —Å–µ—Ä–≤–∏—Å–∞–º
* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT)
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket

**–°—Ç–µ–∫:**

* Go + Gin/Chi
* gRPC-–∫–ª–∏–µ–Ω—Ç—ã –∫–æ –≤—Å–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º
* Redis (—Å–µ—Å—Å–∏–∏, ratelimiter)
* WebSocket —Å–µ—Ä–≤–µ—Ä
* Middleware: Auth, RequestID, Logger

---

## 2. Auth Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, refresh-—Ç–æ–∫–µ–Ω—ã

**–§—É–Ω–∫—Ü–∏–∏:**

* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT –∏ refresh-—Ç–æ–∫–µ–Ω–æ–≤
* –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤

**–°—Ç–µ–∫:**

* PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
* Redis (—Å–µ—Å—Å–∏–∏, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã)
* gRPC Server
* Kafka producer (UserCreated)
* bcrypt, jwt-go

---

## 3. User Profile Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–§—É–Ω–∫—Ü–∏–∏:**

* –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
* –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∏, –±–∏–æ –∏ –¥—Ä.

**–°—Ç–µ–∫:**

* PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ user\_profiles)
* gRPC Server
* Kafka (ProfileUpdated)
* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è REST –¥–ª—è SSR

---

## 4. Tweet Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–≤–∏—Ç–∞–º–∏

**–§—É–Ω–∫—Ü–∏–∏:**

* –°–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–≤–∏—Ç–æ–≤
* –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, —Å—Å—ã–ª–æ–∫, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)

**–°—Ç–µ–∫:**

* PostgreSQL
* Redis (–∫—ç—à –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–≤–∏—Ç–æ–≤)
* Kafka (TweetCreated, TweetDeleted)
* gRPC Server

---

## 5. Feed Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§—É–Ω–∫—Ü–∏–∏:**

* Fan-out on write –∏–ª–∏ on read
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ç–≤–∏—Ç–æ–≤

**–°—Ç–µ–∫:**

* Redis (user feed cache)
* Kafka Consumer (TweetCreated)
* gRPC Server

---

## 6. Follow Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ–¥–ø–∏—Å–∫–∏/–æ—Ç–ø–∏—Å–∫–∏

**–§—É–Ω–∫—Ü–∏–∏:**

* –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–∏ many-to-many

**–°—Ç–µ–∫:**

* PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ follows)
* Kafka (FollowCreated)
* gRPC Server

---

## 7. Like Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ª–∞–π–∫–∏ —Ç–≤–∏—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

* –°—Ç–∞–≤–∏—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ª–∞–π–∫
* –ü–æ–¥—Å—á—ë—Ç –ª–∞–π–∫–æ–≤

**–°—Ç–µ–∫:**

* Redis (—Ä–µ–∞–ª—Ç–∞–π–º)
* PostgreSQL (–∏—Å—Ç–æ—Ä–∏—è)
* Kafka (LikeCreated)
* gRPC Server

---

## 8. Notification Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§—É–Ω–∫—Ü–∏–∏:**

* Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (WebSocket)
* Email/SMS (–≤–Ω–µ—à–Ω–∏–µ)

**–°—Ç–µ–∫:**

* PostgreSQL (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
* Redis PubSub ‚Üí WebSocket Gateway
* Kafka Consumer (TweetLiked, Followed)

---

## 9. Search Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

**–§—É–Ω–∫—Ü–∏–∏:**

* –ü–æ–∏—Å–∫ —Ç–≤–∏—Ç–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–°—Ç–µ–∫:**

* PostgreSQL FTS –∏–ª–∏ Bleve/Meilisearch
* gRPC Server
* Kafka Consumer

---

## 10. Analytics Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–§—É–Ω–∫—Ü–∏–∏:**

* –ü–æ–¥—Å—á—ë—Ç —Ç–≤–∏—Ç–æ–≤, –ª–∞–π–∫–æ–≤, —Ñ–æ–ª–ª–æ–≤–µ—Ä–æ–≤
* –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–°—Ç–µ–∫:**

* ClickHouse
* Kafka Consumers (TweetCreated –∏ –¥—Ä.)
* REST/gRPC –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç—á—ë—Ç–æ–≤

---

## 11. Media Service (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

* –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫
* –†–∞–∑–¥–∞—á–∞ CDN —Å—Å—ã–ª–æ–∫

**–°—Ç–µ–∫:**

* MinIO –∏–ª–∏ —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
* REST API
* gRPC Server

---

## 12. Admin Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

**–§—É–Ω–∫—Ü–∏–∏:**

* –ë–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫

**–°—Ç–µ–∫:**

* PostgreSQL
* gRPC + REST
* RBAC Middleware

---

## 13. WebSocket Gateway

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ real-time –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–§—É–Ω–∫—Ü–∏–∏:**

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è

**–°—Ç–µ–∫:**

* Redis PubSub
* WebSocket —Å–µ—Ä–≤–µ—Ä
* gRPC –∫–ª–∏–µ–Ω—Ç ‚Üí Notification Service

---

## 14. Email/SMS Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏:**

* Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ API (–∏–ª–∏ –∑–∞–≥–ª—É—à–∫–∏)

**–°—Ç–µ–∫:**

* Kafka Consumer
* SMTP/Mailgun API (mock)
* gRPC Server

---

## 15. Logger / Log Collector

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –ª–æ–≥–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

* –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
* –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Loki

**–°—Ç–µ–∫:**

* Zap –∏–ª–∏ Logrus
* Loki
* Grafana Dashboards

---

## 16. Rate Limiter Service

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

* RPS/–æ–±—ä—ë–º –ø–æ IP/—Ç–æ–∫–µ–Ω—É
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ SDK –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

**–°—Ç–µ–∫:**

* Redis
* gRPC Server

---

# ü§î –ü—Ä–æ—á–µ–µ

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

* Prometheus + Grafana
* AlertManager —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Telegram

**CI/CD:**

* GitHub Actions (build/test/lint)

**TLS:**

* Let's Encrypt

**Real-Time:**

* WebSocket Gateway –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å

**Backup:**

* –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è, —Ñ–æ–∫—É—Å –Ω–∞ —Ñ–∏—á–∞—Ö

**Service Mesh:**

* –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ MVP-—ç—Ç–∞–ø–µ

**ML:**

* –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, real-time scoring –Ω–µ –Ω—É–∂–µ–Ω

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `auth-service` –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å Makefile, Dockerfile –∏ –±–∞–∑–æ–≤–æ–π gRPC-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
